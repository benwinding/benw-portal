extends ../shared/layout

block head
    title Home - Ben Winding
    link(rel='stylesheet', href='/css/portal.css')

mixin makeCard(bootstrapSize, img, category, acronym, title, linkUrl, imageUrl)
    div(class=bootstrapSize + " " + category)
        div(class="item " + category + " tint",style="background-image: url("+imageUrl+");")
            a#cardlink(href=linkUrl)
                img.behind(src='/images/' + img)
                div(class="item-content ")
                    p.item-acronym=acronym
                    p.item-name=title
                    div#gears


block content
    - var colSizes =           "col-xs-6  col-sm-3 col-md-3 col-lg-3";
    - var smSquare = "grid-item col-xs-6  col-sm-3 col-md-3 col-lg-3";
    - var mdSquare = "grid-item col-xs-6  col-sm-6 col-md-3 col-lg-3";
    - var lgSquare = "grid-item col-xs-12 col-sm-6 col-md-6 col-lg-6";
    .background
        .container
            .row#topButtons
                .col-xs-12.text-center
                    h1 Periodic Table of Projects
                    .btn-group#filters(role='group', aria-label='Basic example')
                        button.btn.active(data-filter='*')
                            i.fas.fa-asterisk  
                            span All
                        button.btn#b1(data-filter='.c1')
                            i.fas.fa-user  
                            span Me
                        button.btn#b2(data-filter='.c2')
                            i.fas.fa-cubes  
                            span Apps
                        button.btn#b3(data-filter='.c3') 
                            i.fas.fa-flask
                            span Experimental
                        button.btn#b4(data-filter='.c4')
                            i.fas.fa-folder-open
                            span Misc
            .grid
                div(class="grid-sizer " + colSizes)
                +makeCard(lgSquare, "r1-c2.svg", "c1", "Me", "About", "/about", "https://i.imgur.com/9EDPzlX.jpg")
                +makeCard(smSquare, "r1-c1.svg", "c2", "Cr", "Cricket Lanes", "https://benwinding.github.io/CricketNet-Demo/", "https://i.imgur.com/HOEhfy7.jpg")
                +makeCard(smSquare, "r1-c1.svg", "c4", "Ds", "This Site?", "/but-how?", "https://i.imgur.com/7TS2LVj.jpg")
                +makeCard(lgSquare, "r1-c2.svg", "c1", "Bg", "Blog", "http://blog.benwinding.com", "https://i.imgur.com/0sIeGjL.jpg")
                +makeCard(smSquare, "r1-c1.svg", "c3", "Bb", "Breeze Bot", "https://breeze-bot-landing.herokuapp.com/", "https://i.imgur.com/BoEjyYW.png")
                +makeCard(smSquare, "r1-c1.svg", "c3", "Mb", "Meme Bot", "https://breeze-bot-landing.herokuapp.com/", "https://i.imgur.com/FWY5P8h.png")
                +makeCard(smSquare, "r1-c1.svg", "c2", "Wp", "Wake Park", "https://benwinding.github.io/angular2-wakepark-teaser/#/parkPreview", "https://i.imgur.com/XnvWfB4.png")
                +makeCard(smSquare, "r1-c1.svg", "c3", "Cs", "Choiceful Stories", "https://breeze-bot-landing.herokuapp.com/", "https://i.imgur.com/0sIeGjL.jpg")

    script.
        $(function () {
            $('.item').bind('click', function (ev) {
                ev.preventDefault();
                var card = $(this);
                var cardParent = card.parent();
                var cardLink = card.find('#cardlink');
                cardParent.css({
                    "zIndex": 999,
                    "position": "fixed",
                    "margin": "0",
                    "padding": "0",
                    "opacity": "1"
                });
                card.animate({
                    "height": "100vh",
                    "width": "100vw"
                });
                cardParent.animate({
                    "top": "0",
                    "left": "0",
                    "width": "100%",
                    "height": "100vh",
                    "fontSize": "2em"
                });
                cardParent.css({
                    "zIndex": 999,
                    "position": "fixed",
                    "margin": "0",
                    "padding": "0"
                });
                card.toggleClass('whited');
                cardLink.css({
                  color: "grey"
                });
                card.find('#gears').toggleClass('loading')
                setTimeout(function () {
                    document.location = cardLink.attr("href");
                }, 1000)
            });
        });
        $('.grid').isotope({
            itemSelector: '.grid-item',
            masonry: {
                columnWidth: '.grid-sizer'
            },
            hiddenStyle: {
                opacity: 0
            },
            visibleStyle: {
                opacity: 1
            }
        });
        setTimeout(function() {
            $('.grid').isotope('layout')
            setTimeout(function () {
                $('.grid').isotope('layout')
            }, 500);
        }, 500);

        // bind filter button click
        $('#filters').on('click', 'button', function () {
            var filterValue = $(this).attr('data-filter');
            $('.grid').isotope({filter: filterValue});
        });
        // change is-checked class on buttons
        $('.btn-group').each(function (i, buttonGroup) {
            var $buttonGroup = $(buttonGroup);
            $buttonGroup.on('click', 'button', function () {
                $buttonGroup.find('.active').removeClass('active');
                $(this).addClass('active');
            });
        });

